# baseURI: http://teamwork.topbraidlive.org/unnamed9
# imports: http://spinrdf.org/spin
# imports: http://www.buildingsmart-tech.org/ifcOWL/IFC2X3_TC1

@prefix ifcowl:  <http://www.buildingsmart-tech.org/ifcOWL/IFC2X3_TC1#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix pset:    <http://bimsparql.org/pset#> .
@prefix qrw:     <http://bimsparql.org/query-rewriting#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sp:      <http://spinrdf.org/sp#> .
@prefix spin:    <http://spinrdf.org/spin#> .
@prefix spl:     <http://spinrdf.org/spl#> .
@prefix unnamed9:  <http://teamwork.topbraidlive.org/unnamed9#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .

pset:isExternal
      rdf:type spin:MagicProperty ;
      rdfs:subClassOf spin:MagicProperties ;
      spin:body
              [ rdf:type sp:Select ;
                sp:resultVariables ([ sp:varName "str"^^xsd:string
                          ]) ;
                sp:where ([ sp:object
                                    [ sp:varName "p"^^xsd:string
                                    ] ;
                            sp:predicate qrw:hasProperty ;
                            sp:subject spin:_arg1
                          ] [ sp:object
                                    [ sp:varName "name"^^xsd:string
                                    ] ;
                            sp:predicate ifcowl:name_IfcProperty ;
                            sp:subject
                                    [ sp:varName "p"^^xsd:string
                                    ]
                          ] [ sp:object "IsExternal" ;
                            sp:predicate <http://purl.org/voc/express#hasString> ;
                            sp:subject
                                    [ sp:varName "name"^^xsd:string
                                    ]
                          ] [ sp:object
                                    [ sp:varName "val"^^xsd:string
                                    ] ;
                            sp:predicate ifcowl:nominalValue_IfcPropertySingleValue ;
                            sp:subject
                                    [ sp:varName "p"^^xsd:string
                                    ]
                          ] [ sp:object
                                    [ sp:varName "str"^^xsd:string
                                    ] ;
                            sp:predicate <http://purl.org/voc/express#hasBoolean> ;
                            sp:subject
                                    [ sp:varName "val"^^xsd:string
                                    ]
                          ])
              ] ;
      spin:constraint
              [ rdf:type spl:Argument ;
                spl:predicate sp:arg1 ;
                spl:valueType rdfs:Resource
              ] .

qrw:hasProperty
      rdf:type spin:MagicProperty ;
      rdfs:subClassOf spin:MagicProperties ;
      spin:body
              [ rdf:type sp:Select ;
                sp:resultVariables ([ sp:varName "p"^^xsd:string
                          ]) ;
                sp:where ([ sp:object
                                    [ sp:varName "pSet"^^xsd:string
                                    ] ;
                            sp:predicate qrw:hasPropertySet ;
                            sp:subject spin:_arg1
                          ] [ sp:object
                                    [ sp:varName "p"^^xsd:string
                                    ] ;
                            sp:predicate ifcowl:hasProperties_IfcPropertySet ;
                            sp:subject
                                    [ sp:varName "pSet"^^xsd:string
                                    ]
                          ])
              ] ;
      spin:constraint
              [ rdf:type spl:Argument ;
                spl:predicate sp:arg1 ;
                spl:valueType rdfs:Resource
              ] .

qrw:hasPropertySet
      rdf:type spin:MagicProperty ;
      rdfs:subClassOf spin:MagicProperties ;
      spin:body
              [ rdf:type sp:Select ;
                sp:resultVariables ([ sp:varName "pSet"^^xsd:string
                          ]) ;
                sp:where ([ sp:object spin:_arg1 ;
                            sp:predicate ifcowl:relatedObjects_IfcRelDefines ;
                            sp:subject
                                    [ sp:varName "rel"^^xsd:string
                                    ]
                          ] [ sp:object
                                    [ sp:varName "pSet"^^xsd:string
                                    ] ;
                            sp:predicate ifcowl:relatingPropertyDefinition_IfcRelDefinesByProperties ;
                            sp:subject
                                    [ sp:varName "rel"^^xsd:string
                                    ]
                          ] [ sp:object ifcowl:IfcRelDefinesByProperties ;
                            sp:predicate rdf:type ;
                            sp:subject
                                    [ sp:varName "rel"^^xsd:string
                                    ]
                          ])
              ] ;
      spin:constraint
              [ rdf:type spl:Argument ;
                spl:predicate sp:arg1 ;
                spl:valueType rdfs:Resource
              ] .

qrw:isContainedIn
      rdf:type spin:MagicProperty ;
      rdfs:subClassOf spin:MagicProperties ;
      spin:body
              [ rdf:type sp:Select ;
                sp:resultVariables ([ sp:varName "a2"^^xsd:string
                          ]) ;
                sp:where ([ sp:object spin:_arg1 ;
                            sp:predicate ifcowl:relatedElements_IfcRelContainedInSpatialStructure ;
                            sp:subject
                                    [ sp:varName "a1"^^xsd:string
                                    ]
                          ] [ sp:object
                                    [ sp:varName "a2"^^xsd:string
                                    ] ;
                            sp:predicate ifcowl:relatingStructure_IfcRelContainedInSpatialStructure ;
                            sp:subject
                                    [ sp:varName "a1"^^xsd:string
                                    ]
                          ] [ sp:object ifcowl:IfcRelContainedInSpatialStructure ;
                            sp:predicate rdf:type ;
                            sp:subject
                                    [ sp:varName "a1"^^xsd:string
                                    ]
                          ])
              ] ;
      spin:constraint
              [ rdf:type spl:Argument ;
                spl:predicate sp:arg1 ;
                spl:valueType rdfs:Resource
              ] .

<http://teamwork.topbraidlive.org/unnamed9>
      rdf:type owl:Ontology ;
      owl:imports <http://spinrdf.org/spin> , <http://www.buildingsmart-tech.org/ifcOWL/IFC2X3_TC1> ;
      owl:versionInfo "Created with TopBraid Composer"^^xsd:string .
